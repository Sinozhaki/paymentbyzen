<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Payment By Zen</title>
    <!-- Memuat Tailwind CSS untuk styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Memuat Google Fonts: Poppins -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f0f2f5;
            overflow-x: hidden;
        }
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                radial-gradient(circle at 15% 20%, rgba(59, 130, 246, 0.05) 0%, transparent 40%),
                radial-gradient(circle at 85% 75%, rgba(37, 99, 235, 0.05) 0%, transparent 40%);
            z-index: -1;
        }
        .modal-enter { opacity: 0; transform: scale(0.95); }
        .modal-enter-active { opacity: 1; transform: scale(1); transition: all 0.2s ease-out; }
        .modal-leave-active { opacity: 0; transform: scale(0.95); transition: all 0.2s ease-in; }

        @keyframes fall {
            0% { transform: translateY(-10vh) rotateZ(0deg); opacity: 1; }
            100% { transform: translateY(110vh) rotateZ(360deg); opacity: 0; }
        }
        .dollar {
            position: absolute;
            top: -10vh;
            font-size: 2rem;
            animation-name: fall;
            animation-timing-function: linear;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(59, 130, 246, 0.3), 0 0 8px rgba(255, 255, 255, 0.2); }
            50% { box-shadow: 0 0 35px rgba(59, 130, 246, 0.6), 0 0 15px rgba(255, 255, 255, 0.3); }
        }
        .glowing-card { animation: pulse-glow 2.5s infinite ease-in-out; }

        input, button { -webkit-tap-highlight-color: transparent; }
    </style>
</head>
<body class="antialiased">

    <div class="flex items-center justify-center min-h-screen px-4">
        <div class="w-full max-w-md bg-white p-8 rounded-2xl shadow-lg">
            <div class="text-center mb-8">
                <h1 class="text-2xl md:text-3xl font-bold text-blue-600">Portal Pembayaran Zen</h1>
                <p class="text-slate-500 mt-2">Login untuk melihat status akun & pembayaran Anda.</p>
            </div>
            <form id="login-form">
                <div class="space-y-5">
                    <div>
                        <label for="email" class="block text-sm font-medium text-slate-700 mb-1">Email</label>
                        <div class="relative"><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg class="h-5 w-5 text-slate-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z" /><path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z" /></svg></div><input type="email" id="email" name="email" required placeholder="contoh@gmail.com" class="w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition duration-150 ease-in-out"></div>
                    </div>
                    <div>
                        <label for="whatsapp" class="block text-sm font-medium text-slate-700 mb-1">No. WhatsApp</label>
                        <div class="relative"><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg class="h-5 w-5 text-slate-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.518.76a11.034 11.034 0 006.364 6.364l.76-1.518a1 1 0 011.06-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2.153a1 1 0 01-.986-.836l-.74-4.435a1 1 0 01.54-1.06l1.518-.76a11.034 11.034 0 00-6.364-6.364l-.76 1.518a1 1 0 01-1.06.54l-4.435-.74A1 1 0 013 4.847V3z" /></svg></div><input type="text" id="whatsapp" name="whatsapp" required placeholder="Contoh: 081234567890" class="w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition duration-150 ease-in-out"></div>
                    </div>
                </div>
                <div class="mt-8"><button type="submit" id="login-button" class="w-full flex justify-center items-center gap-2 bg-blue-600 text-white font-semibold py-3 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200" disabled><span id="login-button-text">Memuat Data...</span><svg id="spinner" class="animate-spin h-5 w-5 text-white hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></button></div>
            </form>
            <div id="message" class="mt-6 text-center text-sm font-medium hidden"></div>
        </div>
    </div>
    
    <!-- Modal -->
    <div id="payment-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-60">
        <div id="modal-content" class="relative bg-white rounded-2xl shadow-xl w-full max-w-sm mx-auto modal-enter">
            
            <div id="payment-status-view">
                <div class="p-6"><h3 class="text-xl text-center font-bold text-slate-800 mb-4">Status Pembayaran</h3><div id="payment-card" class="bg-gradient-to-br from-blue-600 to-blue-700 text-white rounded-2xl shadow-lg p-6 flex flex-col h-56 transition-shadow duration-300"><div class="flex justify-between items-center"><span class="font-bold text-xl tracking-wide">ZEN PAY</span><svg class="w-10 h-8" viewBox="0 0 40 28" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="4" y="5" width="32" height="18" rx="3" fill="white" fill-opacity="0.3"/><rect x="7" y="10" width="8" height="6" rx="1" stroke="white" stroke-width="1.5"/><rect x="18" y="11.5" width="2" height="3" rx="0.5" fill="white"/><rect x="22" y="11.5" width="2" height="3" rx="0.5" fill="white"/><rect x="26" y="11.5" width="2" height="3" rx="0.5" fill="white"/></svg></div><div class="flex-grow flex flex-col justify-center items-center"><p class="text-sm font-light text-blue-100 mb-1">Total Pembayaran</p><p id="modal-payment-amount" class="text-5xl font-bold tracking-wider text-white"></p></div><div class="flex justify-between items-end text-sm text-blue-100"><div class="flex flex-col"><span class="text-xs uppercase tracking-widest font-light">Card Holder</span><span id="card-holder-email" class="font-semibold text-white truncate"></span></div><div class="flex flex-col items-end"><span class="text-xs uppercase tracking-widest font-light">Status</span><span id="card-status" class="font-semibold text-white capitalize"></span></div></div></div><div class="mt-6 grid grid-cols-2 gap-3"><button id="close-modal-btn" class="w-full bg-slate-200 text-slate-800 font-semibold py-2.5 px-4 rounded-lg hover:bg-slate-300 transition">Tutup</button><button id="withdraw-btn" class="w-full bg-blue-600 text-white font-semibold py-2.5 px-4 rounded-lg hover:bg-blue-700 transition">Withdraw Gaji</button></div></div>
            </div>

            <div id="withdrawal-form-view" class="hidden">
                <form id="withdrawal-form"><div class="p-6"><div class="text-center mb-6"><div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 mb-2"><svg class="h-6 w-6 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 002.25-2.25V6.75A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25v10.5A2.25 2.25 0 004.5 19.5z" /></svg></div><h3 class="text-xl font-bold text-slate-800">Langkah Terakhir</h3><p class="text-sm text-slate-500">Isi detail pencairan dana Anda.</p></div><div class="space-y-5"><div class="relative"><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg class="h-5 w-5 text-slate-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" /></svg></div><input type="text" id="atas-nama" class="peer w-full h-12 px-10 text-slate-900 placeholder-transparent border-b-2 border-slate-300 focus:outline-none focus:border-blue-500" placeholder="Atas Nama" required><label for="atas-nama" class="absolute left-10 -top-3.5 text-slate-500 text-sm transition-all peer-placeholder-shown:text-base peer-placeholder-shown:text-slate-400 peer-placeholder-shown:top-3 peer-focus:-top-3.5 peer-focus:text-blue-500 peer-focus:text-sm">Atas Nama</label></div><div class="relative"><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg class="h-5 w-5 text-slate-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path d="M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z" /><path fill-rule="evenodd" d="M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm3 0a1 1 0 011-1h1a1 1 0 110 2H8a1 1 0 01-1-1zm3 0a1 1 0 011-1h1a1 1 0 110 2h-1a1 1 0 01-1-1z" clip-rule="evenodd" /></svg></div><input type="number" id="no-rekening" class="peer w-full h-12 px-10 text-slate-900 placeholder-transparent border-b-2 border-slate-300 focus:outline-none focus:border-blue-500" placeholder="No. Rekening" required><label for="no-rekening" class="absolute left-10 -top-3.5 text-slate-500 text-sm transition-all peer-placeholder-shown:text-base peer-placeholder-shown:text-slate-400 peer-placeholder-shown:top-3 peer-focus:-top-3.5 peer-focus:text-blue-500 peer-focus:text-sm">No. Rekening</label></div><div class="relative"><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg class="h-5 w-5 text-slate-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10.496 2.132a1 1 0 00-.992 0l-7 4A1 1 0 003 8v10a1 1 0 001 1h12a1 1 0 001-1V8a1 1 0 00-.504-.868l-7-4zM6 9a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 011-1h4a1 1 0 110 2H8a1 1 0 01-1-1z" clip-rule="evenodd" /></svg></div><input type="text" id="nama-bank" class="peer w-full h-12 px-10 text-slate-900 placeholder-transparent border-b-2 border-slate-300 focus:outline-none focus:border-blue-500" placeholder="Nama Bank" required><label for="nama-bank" class="absolute left-10 -top-3.5 text-slate-500 text-sm transition-all peer-placeholder-shown:text-base peer-placeholder-shown:text-slate-400 peer-placeholder-shown:top-3 peer-focus:-top-3.5 peer-focus:text-blue-500 peer-focus:text-sm">Nama Bank</label></div></div><div class="mt-8 grid grid-cols-2 gap-3"><button type="button" id="back-to-status-btn" class="w-full bg-slate-200 text-slate-800 font-semibold py-2.5 px-4 rounded-lg hover:bg-slate-300 transition">Kembali</button><button type="submit" class="w-full bg-green-600 text-white font-semibold py-2.5 px-4 rounded-lg hover:bg-green-700 transition">Ajukan Withdraw</button></div></div></form></div>
        </div>
    </div>

    <script>
        const SPREADSHEET_ID = '19hSqumZNS1UEylAEnmrlteTuJjVcRgiNhgNJYDxom1M';
        const SHEET_NAME = 'Sheet1';
        const API_URL = `https://docs.google.com/spreadsheets/d/${SPREADSHEET_ID}/gviz/tq?tqx=out:csv&sheet=${SHEET_NAME}&t=${new Date().getTime()}`;
        
        let userData = [];
        let currentUser = null;

        const loginForm = document.getElementById('login-form'),
              emailInput = document.getElementById('email'),
              whatsappInput = document.getElementById('whatsapp'),
              loginButton = document.getElementById('login-button'),
              loginButtonText = document.getElementById('login-button-text'),
              spinner = document.getElementById('spinner'),
              messageDiv = document.getElementById('message'),
              paymentModal = document.getElementById('payment-modal'),
              modalContent = document.getElementById('modal-content'),
              paymentStatusView = document.getElementById('payment-status-view'),
              withdrawalFormView = document.getElementById('withdrawal-form-view'),
              closeModalBtn = document.getElementById('close-modal-btn'),
              withdrawBtn = document.getElementById('withdraw-btn'),
              backToStatusBtn = document.getElementById('back-to-status-btn'),
              paymentCard = document.getElementById('payment-card'),
              cardHolderEmail = document.getElementById('card-holder-email'),
              cardStatus = document.getElementById('card-status'),
              modalPaymentAmount = document.getElementById('modal-payment-amount'),
              withdrawalForm = document.getElementById('withdrawal-form');
        
        // [DIPERBAIKI] Logika Audio Web API
        let audioCtx;
        let isAudioInitialized = false;

        async function initAudio() {
            if (isAudioInitialized) return;
            try {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                // Resume context jika dalam keadaan suspended (kebijakan browser)
                if (audioCtx.state === 'suspended') {
                    await audioCtx.resume();
                }
                isAudioInitialized = true;
                console.log('Audio Context is ready.');
            } catch (e) {
                console.error('Web Audio API is not supported in this browser', e);
            }
        }
        
        function playSound(type) {
             if (!isAudioInitialized) return;
             
             const now = audioCtx.currentTime;
             const gainNode = audioCtx.createGain();
             gainNode.connect(audioCtx.destination);
             
             const oscillator = audioCtx.createOscillator();
             oscillator.connect(gainNode);

             if (type === 'main') {
                oscillator.type = 'triangle';
                oscillator.frequency.setValueAtTime(800, now);
                gainNode.gain.setValueAtTime(0.3, now);
                gainNode.gain.exponentialRampToValueAtTime(0.001, now + 0.1);
                oscillator.start(now);
                oscillator.stop(now + 0.1);
             } else if (type === 'soft') {
                 oscillator.type = 'sine';
                 oscillator.frequency.setValueAtTime(600, now);
                 gainNode.gain.setValueAtTime(0.2, now);
                 gainNode.gain.exponentialRampToValueAtTime(0.001, now + 0.1);
                 oscillator.start(now);
                 oscillator.stop(now + 0.1);
             } else if (type === 'focus') {
                 oscillator.type = 'square';
                 oscillator.frequency.setValueAtTime(200, now);
                 gainNode.gain.setValueAtTime(0.1, now);
                 gainNode.gain.exponentialRampToValueAtTime(0.001, now + 0.05);
                 oscillator.start(now);
                 oscillator.stop(now + 0.05);
             }
        }


        function parseCSV(csvText) {
            const rows = csvText.trim().split('\n');
            if (rows.length < 2) return [];
            const headers = rows[0].split(',').map(h => h.trim().replace(/"/g, ''));
            const emailIndex = headers.findIndex(h => h.toLowerCase() === 'email');
            const whatsappIndex = headers.findIndex(h => h.toLowerCase() === 'no whatsapp');
            const paymentIndex = headers.findIndex(h => h.toLowerCase() === 'payment');
            const statusIndex = headers.findIndex(h => h.toLowerCase() === 'status');
            const claimedIndex = headers.findIndex(h => h.toLowerCase() === 'claimed');
            if (emailIndex === -1 || whatsappIndex === -1) return [];
            return rows.slice(1).map(row => {
                const values = row.match(/(".*?"|[^",]+)(?=\s*,|\s*$)/g) || [];
                return {
                    email: (values[emailIndex] || '').trim().replace(/"/g, ''),
                    whatsapp: (values[whatsappIndex] || '').trim().replace(/"/g, ''),
                    payment: (values[paymentIndex] || 'N/A').trim().replace(/"/g, ''),
                    status: (values[statusIndex] || 'N/A').trim().replace(/"/g, ''),
                    claimed: (values[claimedIndex] || 'No').trim().replace(/"/g, '')
                };
            }).filter(user => user.email && user.whatsapp);
        }

        async function fetchData() {
            try {
                const response = await fetch(API_URL);
                if (!response.ok) throw new Error('Network response was not ok.');
                const csvText = await response.text();
                userData = parseCSV(csvText);
                if (userData.length > 0) {
                    loginButton.disabled = false;
                    loginButtonText.textContent = 'Login';
                } else { throw new Error('No valid user data found.'); }
            } catch (error) {
                loginButtonText.textContent = 'Gagal Memuat Data';
                messageDiv.textContent = 'Tidak dapat terhubung ke database.';
                messageDiv.className = 'mt-6 text-center text-sm font-medium text-red-600';
                messageDiv.classList.remove('hidden');
            }
        }

        function handleLogin(event) {
            event.preventDefault();
            const email = emailInput.value.trim().toLowerCase();
            const whatsapp = whatsappInput.value.trim();
            messageDiv.classList.add('hidden');
            loginButton.disabled = true;
            loginButtonText.textContent = 'Memverifikasi...';
            spinner.classList.remove('hidden');
            currentUser = userData.find(user => user.email.toLowerCase() === email && user.whatsapp === whatsapp);
            setTimeout(() => {
                if (currentUser) {
                    if (currentUser.claimed.toLowerCase().trim() === 'yes') {
                        messageDiv.textContent = 'Gaji untuk akun ini sudah di-claim dan tidak dapat login lagi.';
                        messageDiv.className = 'mt-6 text-center text-sm font-medium text-red-600';
                        messageDiv.classList.remove('hidden');
                    } else {
                        showPaymentModal(currentUser);
                    }
                } else {
                    messageDiv.textContent = 'Email atau Nomor WhatsApp salah.';
                    messageDiv.className = 'mt-6 text-center text-sm font-medium text-red-600';
                    messageDiv.classList.remove('hidden');
                }
                loginButton.disabled = false;
                loginButtonText.textContent = 'Login';
                spinner.classList.add('hidden');
            }, 1000);
        }

        function startDollarRain() {
            const container = document.createElement('div');
            container.style.cssText = 'position:fixed;top:0;left:0;width:100%;height:100vh;pointer-events:none;z-index:9999;';
            document.body.appendChild(container);
            for (let i = 0; i < 40; i++) {
                const dollar = document.createElement('div');
                dollar.innerHTML = '💵';
                dollar.classList.add('dollar');
                dollar.style.left = Math.random() * 100 + 'vw';
                dollar.style.animationDuration = (Math.random() * 2 + 3) + 's';
                dollar.style.animationDelay = Math.random() * 4 + 's';
                dollar.style.animationIterationCount = '1';
                container.appendChild(dollar);
            }
            setTimeout(() => container.remove(), 7000);
        }

        function animateValue(obj, start, end, duration, currencySymbol) {
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                const easedProgress = 1 - Math.pow(1 - progress, 3);
                const currentValue = Math.floor(easedProgress * (end - start) + start);
                obj.innerHTML = currencySymbol + currentValue;
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                } else {
                    obj.innerHTML = currencySymbol + end;
                    startDollarRain();
                }
            };
            window.requestAnimationFrame(step);
        }

        function showPaymentModal(user) {
            paymentModal.classList.remove('hidden');
            paymentStatusView.classList.remove('hidden');
            withdrawalFormView.classList.add('hidden');
            paymentCard.classList.add('glowing-card');
            cardHolderEmail.textContent = user.email;
            cardStatus.textContent = user.status || 'N/A';
            requestAnimationFrame(() => {
                modalContent.classList.add('modal-enter-active');
                modalContent.classList.remove('modal-enter');
            });
            const paymentText = user.payment || 'N/A';
            const currencySymbol = paymentText.startsWith('$') ? '$' : '';
            const numericalValueMatch = paymentText.match(/\d+/);
            if (numericalValueMatch) {
                const endValue = parseInt(numericalValueMatch[0], 10);
                setTimeout(() => animateValue(modalPaymentAmount, 0, endValue, 1200, currencySymbol), 150);
            } else {
                modalPaymentAmount.textContent = 'Belum Ada';
            }
        }
        
        function handleWithdrawalSubmit(event) {
            event.preventDefault();
            const atasNama = document.getElementById('atas-nama').value;
            const noRekening = document.getElementById('no-rekening').value;
            const namaBank = document.getElementById('nama-bank').value;
            const message = `*PENGAJUAN WITHDRAWAL*%0A%0A*Nama:* ${atasNama}%0A*No. Rekening:* ${noRekening}%0A*Bank:* ${namaBank}%0A%0A*Email:* ${currentUser.email}%0A*No. WhatsApp:* ${currentUser.whatsapp}%0A*Status Akun:* ${currentUser.status}`;
            const whatsappUrl = `https://api.whatsapp.com/send?phone=62859106914815&text=${message}`;
            window.open(whatsappUrl, '_blank');
            closePaymentModal();
        }

        function closePaymentModal() {
            paymentCard.classList.remove('glowing-card');
            modalContent.classList.add('modal-leave-active');
            modalContent.classList.remove('modal-enter-active');
            setTimeout(() => {
                paymentModal.classList.add('hidden');
                modalContent.classList.remove('modal-leave-active');
                modalContent.classList.add('modal-enter');
                withdrawalForm.reset();
            }, 200);
        }
        
        function switchToWithdrawForm() {
            paymentStatusView.classList.add('hidden');
            withdrawalFormView.classList.remove('hidden');
            paymentCard.classList.remove('glowing-card');
        }

        document.addEventListener('click', (e) => {
            initAudio(); // Inisialisasi audio saat klik pertama di mana saja
            const button = e.target.closest('button');
            if (button) {
                if (button.classList.contains('bg-blue-600') || button.classList.contains('bg-green-600')) {
                    playSound('main');
                } else {
                    playSound('soft');
                }
            }
        });

        document.addEventListener('focusin', (e) => {
            initAudio(); // Inisialisasi audio saat fokus pertama di mana saja
            if (e.target.tagName === 'INPUT') {
                playSound('focus');
            }
        });

        loginForm.addEventListener('submit', handleLogin);
        closeModalBtn.addEventListener('click', closePaymentModal);
        withdrawBtn.addEventListener('click', switchToWithdrawForm);
        backToStatusBtn.addEventListener('click', () => {
             withdrawalFormView.classList.add('hidden');
             paymentStatusView.classList.remove('hidden');
             paymentCard.classList.add('glowing-card');
        });
        withdrawalForm.addEventListener('submit', handleWithdrawalSubmit);
        paymentModal.addEventListener('click', e => (e.target === paymentModal) && closePaymentModal());
        window.addEventListener('keydown', e => (e.key === 'Escape' && !paymentModal.classList.contains('hidden')) && closePaymentModal());
        document.addEventListener('DOMContentLoaded', fetchData);
    </script>
</body>
</html>

